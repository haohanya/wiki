"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[2018],{3905:(e,l,t)=>{t.d(l,{Zo:()=>p,kt:()=>k});var a=t(7294);function n(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}function r(e,l){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);l&&(a=a.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var l=1;l<arguments.length;l++){var t=null!=arguments[l]?arguments[l]:{};l%2?r(Object(t),!0).forEach((function(l){n(e,l,t[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(t,l))}))}return e}function i(e,l){if(null==e)return{};var t,a,n=function(e,l){if(null==e)return{};var t,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],l.indexOf(t)>=0||(n[t]=e[t]);return n}(e,l);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],l.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var o=a.createContext({}),u=function(e){var l=a.useContext(o),t=l;return e&&(t="function"==typeof e?e(l):s(s({},l),e)),t},p=function(e){var l=u(e.components);return a.createElement(o.Provider,{value:l},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var l=e.children;return a.createElement(a.Fragment,{},l)}},c=a.forwardRef((function(e,l){var t=e.components,n=e.mdxType,r=e.originalType,o=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=u(t),c=n,k=m["".concat(o,".").concat(c)]||m[c]||d[c]||r;return t?a.createElement(k,s(s({ref:l},p),{},{components:t})):a.createElement(k,s({ref:l},p))}));function k(e,l){var t=arguments,n=l&&l.mdxType;if("string"==typeof e||n){var r=t.length,s=new Array(r);s[0]=c;var i={};for(var o in l)hasOwnProperty.call(l,o)&&(i[o]=l[o]);i.originalType=e,i[m]="string"==typeof e?e:n,s[1]=i;for(var u=2;u<r;u++)s[u]=t[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},5162:(e,l,t)=>{t.d(l,{Z:()=>s});var a=t(7294),n=t(6010);const r={tabItem:"tabItem_Ymn6"};function s(e){let{children:l,hidden:t,className:s}=e;return a.createElement("div",{role:"tabpanel",className:(0,n.Z)(r.tabItem,s),hidden:t},l)}},4866:(e,l,t)=>{t.d(l,{Z:()=>q});var a=t(7462),n=t(7294),r=t(6010),s=t(2466),i=t(6550),o=t(1980),u=t(7392),p=t(12);function m(e){return function(e){return n.Children.map(e,(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:l}=e;return!!l&&"object"==typeof l&&"value"in l}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:l,label:t,attributes:a,default:n}}=e;return{value:l,label:t,attributes:a,default:n}}))}function d(e){const{values:l,children:t}=e;return(0,n.useMemo)((()=>{const e=l??m(t);return function(e){const l=(0,u.l)(e,((e,l)=>e.value===l.value));if(l.length>0)throw new Error(`Docusaurus error: Duplicate values "${l.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[l,t])}function c(e){let{value:l,tabValues:t}=e;return t.some((e=>e.value===l))}function k(e){let{queryString:l=!1,groupId:t}=e;const a=(0,i.k6)(),r=function(e){let{queryString:l=!1,groupId:t}=e;if("string"==typeof l)return l;if(!1===l)return null;if(!0===l&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:l,groupId:t});return[(0,o._X)(r),(0,n.useCallback)((e=>{if(!r)return;const l=new URLSearchParams(a.location.search);l.set(r,e),a.replace({...a.location,search:l.toString()})}),[r,a])]}function y(e){const{defaultValue:l,queryString:t=!1,groupId:a}=e,r=d(e),[s,i]=(0,n.useState)((()=>function(e){let{defaultValue:l,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(l){if(!c({value:l,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${l}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return l}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:l,tabValues:r}))),[o,u]=k({queryString:t,groupId:a}),[m,y]=function(e){let{groupId:l}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(l),[a,r]=(0,p.Nk)(t);return[a,(0,n.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:a}),g=(()=>{const e=o??m;return c({value:e,tabValues:r})?e:null})();(0,n.useLayoutEffect)((()=>{g&&i(g)}),[g]);return{selectedValue:s,selectValue:(0,n.useCallback)((e=>{if(!c({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),y(e)}),[u,y,r]),tabValues:r}}var g=t(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function h(e){let{className:l,block:t,selectedValue:i,selectValue:o,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:m}=(0,s.o5)(),d=e=>{const l=e.currentTarget,t=p.indexOf(l),a=u[t].value;a!==i&&(m(l),o(a))},c=e=>{let l=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=p.indexOf(e.currentTarget)+1;l=p[t]??p[0];break}case"ArrowLeft":{const t=p.indexOf(e.currentTarget)-1;l=p[t]??p[p.length-1];break}}l?.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},l)},u.map((e=>{let{value:l,label:t,attributes:s}=e;return n.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===l?0:-1,"aria-selected":i===l,key:l,ref:e=>p.push(e),onKeyDown:c,onClick:d},s,{className:(0,r.Z)("tabs__item",b.tabItem,s?.className,{"tabs__item--active":i===l})}),t??l)})))}function v(e){let{lazy:l,children:t,selectedValue:a}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(l){const e=r.find((e=>e.props.value===a));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},r.map(((e,l)=>(0,n.cloneElement)(e,{key:l,hidden:e.props.value!==a}))))}function N(e){const l=y(e);return n.createElement("div",{className:(0,r.Z)("tabs-container",b.tabList)},n.createElement(h,(0,a.Z)({},e,l)),n.createElement(v,(0,a.Z)({},e,l)))}function q(e){const l=(0,g.Z)();return n.createElement(N,(0,a.Z)({key:String(l)},e))}},4534:(e,l,t)=>{t.r(l),t.d(l,{assets:()=>p,contentTitle:()=>o,default:()=>k,frontMatter:()=>i,metadata:()=>u,toc:()=>m});var a=t(7462),n=(t(7294),t(3905)),r=t(4866),s=t(5162);const i={},o=void 0,u={unversionedId:"\u540e\u7aef/\u6570\u636e\u5e93/MySQL/\u5b89\u88c5",id:"\u540e\u7aef/\u6570\u636e\u5e93/MySQL/\u5b89\u88c5",title:"\u5b89\u88c5",description:"---",source:"@site/docs/\u540e\u7aef/\u6570\u636e\u5e93/MySQL/\u5b89\u88c5.mdx",sourceDirName:"\u540e\u7aef/\u6570\u636e\u5e93/MySQL",slug:"/\u540e\u7aef/\u6570\u636e\u5e93/MySQL/\u5b89\u88c5",permalink:"/docs/\u540e\u7aef/\u6570\u636e\u5e93/MySQL/\u5b89\u88c5",draft:!1,editUrl:"https://github.com/pannanxu/wiki/docs/\u540e\u7aef/\u6570\u636e\u5e93/MySQL/\u5b89\u88c5.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"SQLCode",permalink:"/docs/\u540e\u7aef/\u6570\u636e\u5e93/MySQL/SQLCode"},next:{title:"\u5b9e\u73b0\u9644\u8fd1\u7684\u4eba\u529f\u80fd\uff0c\u9700\u8981\u8003\u8651\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a",permalink:"/docs/\u540e\u7aef/\u6570\u636e\u5e93/PostgreSQL/postgres"}},p={},m=[{value:"sidebar_position: 1",id:"sidebar_position-1",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u73af\u5883\u5907\u6ce8",id:"\u73af\u5883\u5907\u6ce8",level:2},{value:"\u901a\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u65b9\u5f0f",id:"\u901a\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u65b9\u5f0f",level:2},{value:"\u6b64\u65b9\u5f0f\u5b89\u88c5\u4f18\u52bf",id:"\u6b64\u65b9\u5f0f\u5b89\u88c5\u4f18\u52bf",level:3},{value:"\u5b89\u88c5\u73af\u5883",id:"\u5b89\u88c5\u73af\u5883",level:3},{value:"\u6e05\u7406 mariadb",id:"\u6e05\u7406-mariadb",level:4},{value:"libaio \u5e93",id:"libaio-\u5e93",level:4},{value:"\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6",id:"\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6",level:4},{value:"\u4e0b\u8f7d MySQL",id:"\u4e0b\u8f7d-mysql",level:3},{value:"\u6dfb\u52a0\u7528\u6237\u7ec4",id:"\u6dfb\u52a0\u7528\u6237\u7ec4",level:3},{value:"\u89e3\u538b\u6587\u4ef6",id:"\u89e3\u538b\u6587\u4ef6",level:3},{value:"\u521b\u5efa\u7b26\u53f7\u94fe\u63a5",id:"\u521b\u5efa\u7b26\u53f7\u94fe\u63a5",level:3},{value:"\u8d4b\u4e88\u6743\u9650",id:"\u8d4b\u4e88\u6743\u9650",level:3},{value:"\u521d\u59cb\u5316 MySQL",id:"\u521d\u59cb\u5316-mysql",level:3},{value:"my.cnf\uff08\u914d\u7f6e\u5ffd\u7565\u8868\u540d\u5927\u5c0f\u5199, \u53ef\u9009\uff09",id:"mycnf\u914d\u7f6e\u5ffd\u7565\u8868\u540d\u5927\u5c0f\u5199-\u53ef\u9009",level:4},{value:"initialize",id:"initialize",level:4},{value:"\u8bbe\u7f6e SSL",id:"\u8bbe\u7f6e-ssl",level:3},{value:"\u8bbe\u7f6e\u6240\u6709\u6743",id:"\u8bbe\u7f6e\u6240\u6709\u6743",level:3},{value:"\u590d\u5236\u542f\u52a8\u811a\u672c\u5230 init.d",id:"\u590d\u5236\u542f\u52a8\u811a\u672c\u5230-initd",level:3},{value:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf",id:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf",level:3},{value:"\u76ee\u5f55\u5c55\u793a",id:"\u76ee\u5f55\u5c55\u793a",level:3},{value:"\u542f\u52a8 MySQL",id:"\u542f\u52a8-mysql",level:2},{value:"\u4f7f\u7528\u670d\u52a1",id:"\u4f7f\u7528\u670d\u52a1",level:3},{value:"\u4f7f\u7528 init.d",id:"\u4f7f\u7528-initd",level:3},{value:"\u767b\u9646 MySQL",id:"\u767b\u9646-mysql",level:2},{value:"\u81ea\u5b9a\u4e49 root \u7528\u6237\u5bc6\u7801",id:"\u81ea\u5b9a\u4e49-root-\u7528\u6237\u5bc6\u7801",level:2},{value:"\u9000\u51fa\u767b\u9646",id:"\u9000\u51fa\u767b\u9646",level:2},{value:"\u505c\u6b62 MySQL",id:"\u505c\u6b62-mysql",level:2},{value:"\u5b89\u5168\u505c\u6b62",id:"\u5b89\u5168\u505c\u6b62",level:3},{value:"\u4f7f\u7528\u670d\u52a1",id:"\u4f7f\u7528\u670d\u52a1-1",level:3},{value:"\u4f7f\u7528 init.d",id:"\u4f7f\u7528-initd-1",level:3},{value:"\u67e5\u770b\u72b6\u6001",id:"\u67e5\u770b\u72b6\u6001",level:2},{value:"\u4f7f\u7528\u670d\u52a1",id:"\u4f7f\u7528\u670d\u52a1-2",level:3},{value:"\u4f7f\u7528 init.d",id:"\u4f7f\u7528-initd-2",level:3},{value:"\u5378\u8f7d MySQL",id:"\u5378\u8f7d-mysql",level:2},{value:"\u79fb\u9664\u7b26\u53f7\u94fe\u63a5",id:"\u79fb\u9664\u7b26\u53f7\u94fe\u63a5",level:3},{value:"\u68c0\u67e5 mysql \u6307\u5411\u4f4d\u7f6e",id:"\u68c0\u67e5-mysql-\u6307\u5411\u4f4d\u7f6e",level:4},{value:"\u5220\u9664 mysql",id:"\u5220\u9664-mysql",level:4},{value:"\u5bc6\u7801\u5fd8\u8bb0\u600e\u4e48\u529e\uff1f",id:"\u5bc6\u7801\u5fd8\u8bb0\u600e\u4e48\u529e",level:2},{value:"\u4f7f\u7528 --init-file \u91cd\u7f6e\u5bc6\u7801",id:"\u4f7f\u7528---init-file-\u91cd\u7f6e\u5bc6\u7801",level:3},{value:"\u4f7f\u7528 --skip-grant-tables \u514d\u5bc6\u767b\u9646",id:"\u4f7f\u7528---skip-grant-tables-\u514d\u5bc6\u767b\u9646",level:3},{value:"\u91cd\u88c5",id:"\u91cd\u88c5",level:3},{value:"\u4fee\u6539\u6570\u636e\u8def\u5f84",id:"\u4fee\u6539\u6570\u636e\u8def\u5f84",level:2},{value:"\u505c\u6b62 MySQL",id:"\u505c\u6b62-mysql-1",level:3},{value:"\u521b\u5efa\u76ee\u5f55",id:"\u521b\u5efa\u76ee\u5f55",level:3},{value:"\u590d\u5236\u539f\u6709\u7684\u6570\u636e",id:"\u590d\u5236\u539f\u6709\u7684\u6570\u636e",level:3},{value:"\u7f16\u8f91 my.cnf",id:"\u7f16\u8f91-mycnf",level:3},{value:"\u91cd\u542f\u5e76\u68c0\u67e5",id:"\u91cd\u542f\u5e76\u68c0\u67e5",level:3},{value:"my.cnf \u901a\u7528\u914d\u7f6e",id:"mycnf-\u901a\u7528\u914d\u7f6e",level:2},{value:"\u4f7f\u7528X509\u8bbe\u7f6e\u52a0\u5bc6\u8fde\u63a5",id:"\u4f7f\u7528x509\u8bbe\u7f6e\u52a0\u5bc6\u8fde\u63a5",level:2},{value:"\u67e5\u770bSSL\u72b6\u6001",id:"\u67e5\u770bssl\u72b6\u6001",level:3},{value:"\u670d\u52a1\u7aef\u914d\u7f6e",id:"\u670d\u52a1\u7aef\u914d\u7f6e",level:3},{value:"\u914d\u7f6emy.cnf",id:"\u914d\u7f6emycnf",level:4},{value:"\u91cd\u542f",id:"\u91cd\u542f",level:4},{value:"\u5ba2\u6237\u7aef\u914d\u7f6e",id:"\u5ba2\u6237\u7aef\u914d\u7f6e",level:3},{value:"\u8bbe\u7f6e\u5f3a\u5236\u4f7f\u7528 x509 \u8fde\u63a5",id:"\u8bbe\u7f6e\u5f3a\u5236\u4f7f\u7528-x509-\u8fde\u63a5",level:3},{value:"\u6d4b\u8bd5\u975essl\u8fde\u63a5",id:"\u6d4b\u8bd5\u975essl\u8fde\u63a5",level:4},{value:"\u5de5\u5177\u8fde\u63a5\u6d4b\u8bd5",id:"\u5de5\u5177\u8fde\u63a5\u6d4b\u8bd5",level:5}],d={toc:m},c="wrapper";function k(e){let{components:l,...t}=e;return(0,n.kt)(c,(0,a.Z)({},d,t,{components:l,mdxType:"MDXLayout"}),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"sidebar_position-1"},"sidebar_position: 1"),(0,n.kt)("h2",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,n.kt)("h2",{id:"\u73af\u5883\u5907\u6ce8"},"\u73af\u5883\u5907\u6ce8"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"\u64cd\u4f5c\u7cfb\u7edf CentOS 7.7 64bit\nMySQL 64bit 8.0.27 Linux - Generic \n")),(0,n.kt)("h2",{id:"\u901a\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u65b9\u5f0f"},"\u901a\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u65b9\u5f0f"),(0,n.kt)("h3",{id:"\u6b64\u65b9\u5f0f\u5b89\u88c5\u4f18\u52bf"},"\u6b64\u65b9\u5f0f\u5b89\u88c5\u4f18\u52bf"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u907f\u514d\u4e0e\u5176\u5b83\u4f9d\u8d56\u51b2\u7a81"),(0,n.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u7f16\u8bd1\u5668\u8fdb\u884c\u9884\u7f16\u8bd1\u540e\u6784\u5efa\u6027\u80fd\u66f4\u4f73")),(0,n.kt)("h3",{id:"\u5b89\u88c5\u73af\u5883"},"\u5b89\u88c5\u73af\u5883"),(0,n.kt)("h4",{id:"\u6e05\u7406-mariadb"},"\u6e05\u7406 mariadb"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u67e5\u627e\u662f\u5426\u5b58\u5728 ",(0,n.kt)("inlineCode",{parentName:"p"},"mariadb"))),(0,n.kt)(r.Z,{groupId:"operating-systems",mdxType:"Tabs"},(0,n.kt)(s.Z,{value:"centos",label:"CentOS",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"rpm -qa|grep mariadb\n"))),(0,n.kt)(s.Z,{value:"ubuntu",label:"Ubuntu",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"find / -name mariadb\n")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u5b58\u5728\uff0c\u5219\u5220\u9664")),(0,n.kt)(r.Z,{groupId:"operating-systems",mdxType:"Tabs"},(0,n.kt)(s.Z,{value:"centos",label:"CentOS",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"rpm -e --nodeps mariadb-libs\n"))),(0,n.kt)(s.Z,{value:"ubuntu",label:"Ubuntu",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo apt-get --purge remove mariadb\n")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u67e5\u770b\u662f\u5426\u5b58\u5728\u8fc7mysql\u7684\u76f8\u5173\u5185\u5bb9, \u5982\u679c\u6709\u5219\u5220\u9664")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"find / -name mysql\n")),(0,n.kt)("h4",{id:"libaio-\u5e93"},"libaio \u5e93"),(0,n.kt)("p",null,"\u641c\u7d22 libaio \u5e93"),(0,n.kt)(r.Z,{groupId:"operating-systems",mdxType:"Tabs"},(0,n.kt)(s.Z,{value:"centos",label:"CentOS",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"yum search libaio\n"))),(0,n.kt)(s.Z,{value:"ubuntu",label:"Ubuntu",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt-cache search libaio\n")))),(0,n.kt)("p",null,"\u5982\u679c\u6ca1\u6709 libaio \u5e93\uff0c\u5219\u9700\u8981\u6267\u884c\u5b89\u88c5\uff1b\n\u5982\u679c\u6709\uff0c\u5219\u8df3\u8fc7\u4e0b\u4e00\u6b65"),(0,n.kt)(r.Z,{groupId:"operating-systems",mdxType:"Tabs"},(0,n.kt)(s.Z,{value:"centos",label:"CentOS",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo yum install -y libaio\n"))),(0,n.kt)(s.Z,{value:"ubuntu",label:"Ubuntu",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo apt-get install -y libaiol\n")))),(0,n.kt)("p",null,"!> \u6ce8\u610f\uff1a\u5982\u679c\u5b89\u88c5\u4e86 ",(0,n.kt)("inlineCode",{parentName:"p"},"libaio")," \u5e93\u540e\uff0c\u8fd8\u63d0\u793a ",(0,n.kt)("inlineCode",{parentName:"p"},"libaio.so.1")," \u7b49\u7c7b\u4f3c\u7684\u5e93\uff0c\u76f4\u63a5\u8fd0\u884c ",(0,n.kt)("inlineCode",{parentName:"p"},"yum install xxx")," \u5373\u53ef\uff0c\u7f3a\u4ec0\u4e48install\u4ec0\u4e48"),(0,n.kt)("h4",{id:"\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6"},"\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6"),(0,n.kt)("p",null,"\u68c0\u67e5 ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," \u548c ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/mysql")," \u6587\u4ef6\uff0c\u5982\u679c\u5b58\u5728\u5219\u5220\u9664\u5b83\u4eec"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo rm -rf /etc/my.cnf\nsudo rm -rf /etc/mysql\n")),(0,n.kt)("h3",{id:"\u4e0b\u8f7d-mysql"},"\u4e0b\u8f7d MySQL"),(0,n.kt)("p",null,"MySQL\u5404\u79cd\u7248\u672c\u4e0b\u8f7d\u5730\u5740\uff1a",(0,n.kt)("a",{parentName:"p",href:"https://dev.mysql.com/downloads/mysql/"},"https://dev.mysql.com/downloads/mysql/")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"32\u4f4d")," \u9009\u62e9\uff1a",(0,n.kt)("a",{parentName:"li",href:"https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.29-linux-glibc2.12-i686.tar.xz"},"Linux - Generic (glibc 2.12) (x86, 32-bit), Compressed TAR Archive")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"64\u4f4d")," \u9009\u62e9\uff1a",(0,n.kt)("a",{parentName:"li",href:"https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.27-linux-glibc2.12-x86_64.tar.xz"},"Linux - Generic (glibc 2.12) (x86, 64-bit), Compressed TAR Archive"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"## https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.29-linux-glibc2.12-x86_64.tar.xz \u8fd9\u4e2a\u7248\u672c\u4e3a\u4f55\u4f1a\u548c\u4e0b\u9762\u90a3\u4e2a\u7248\u672c\u5c0f\u4e00\u500d?\n## https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.27-linux-glibc2.12-x86_64.tar.xz\ncd /usr/local/\nsudo wget https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.27-linux-glibc2.12-x86_64.tar.xz\n")),(0,n.kt)("h3",{id:"\u6dfb\u52a0\u7528\u6237\u7ec4"},"\u6dfb\u52a0\u7528\u6237\u7ec4"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo groupadd mysql\nsudo useradd -r -g mysql -s /bin/false mysql\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("inlineCode",{parentName:"p"},"useradd: cannot open /etc/passwd")," \u5982\u679c\u51fa\u73b0\u8fd9\u4e2a\u9519\u8bef, \u9700\u8981\u5c06 ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/passwd")," \u7684 ",(0,n.kt)("inlineCode",{parentName:"p"},"-a-i")," \u6743\u9650\u53bb\u9664 ",(0,n.kt)("inlineCode",{parentName:"p"},"chattr -a /etc/passwd")," ",(0,n.kt)("inlineCode",{parentName:"p"},"chattr -i /etc/passwd")),(0,n.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u8fd8\u63d0\u793a ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/shadow")," \u5219\u548c\u4e0a\u9762\u662f\u540c\u7406 ")),(0,n.kt)("h3",{id:"\u89e3\u538b\u6587\u4ef6"},"\u89e3\u538b\u6587\u4ef6"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo tar xvf mysql-8.0.27-linux-glibc2.12-x86_64.tar.xz\n")),(0,n.kt)("h3",{id:"\u521b\u5efa\u7b26\u53f7\u94fe\u63a5"},"\u521b\u5efa\u7b26\u53f7\u94fe\u63a5"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo ln -s /usr/local/mysql-8.0.27-linux-glibc2.12-x86_64 mysql\n")),(0,n.kt)("h3",{id:"\u8d4b\u4e88\u6743\u9650"},"\u8d4b\u4e88\u6743\u9650"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cd mysql\nsudo mkdir mysql-files\nsudo chmod 750 mysql-files\nsudo chown -R mysql .\nsudo chgrp -R mysql .\n")),(0,n.kt)("h3",{id:"\u521d\u59cb\u5316-mysql"},"\u521d\u59cb\u5316 MySQL"),(0,n.kt)("h4",{id:"mycnf\u914d\u7f6e\u5ffd\u7565\u8868\u540d\u5927\u5c0f\u5199-\u53ef\u9009"},"my.cnf\uff08\u914d\u7f6e\u5ffd\u7565\u8868\u540d\u5927\u5c0f\u5199, \u53ef\u9009\uff09"),(0,n.kt)("p",null,"\u7531\u4e8e\u9700\u8981\u8bbe\u7f6e\u8868\u540d\u5ffd\u7565\u5927\u5c0f\u5199\uff0c\u6240\u4ee5\u9700\u8981\u5728 ",(0,n.kt)("inlineCode",{parentName:"p"},"my.cnf")," \u4e2d\u52a0\u5165\u4ee5\u4e0b\u5185\u5bb9"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"[mysqld]\nlower_case_table_names=1\n")),(0,n.kt)("p",null,"!> \u6ce8\u610f\uff1a\u5982\u679c\u6ca1\u6709 ",(0,n.kt)("inlineCode",{parentName:"p"},"my.cnf")," \u5219\u624b\u52a8\u5728 ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," \u521b\u5efa\u4e00\u4e2a"),(0,n.kt)("h4",{id:"initialize"},"initialize"),(0,n.kt)("p",null,"!> \u6ce8\u610f\uff1a\u5982\u679c\u9009\u62e9\u4e0d\u914d\u7f6e\u5ffd\u7565\u8868\u540d\u5927\u5c0f\u5199\uff0c\u8fd9\u91cc\u7684",(0,n.kt)("inlineCode",{parentName:"p"},"--lower-case-table-names=1"),"\u9700\u8981\u53bb\u6389"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo bin/mysqld --initialize --user=mysql --lower-case-table-names=1\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u521d\u59cb\u5316\u5b8c\u6210\u540e\uff0c\u4f1a\u6253\u5370\u51fa\u4e00\u4e2a\u4e34\u65f6\u5bc6\u7801\uff0c\u65e5\u5fd7\u5982\u4e0b\n\u5bc6\u7801\u8981\u8bb0\u4f4f\uff0c\u5f85\u4f1a\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u5bc6\u7801\u767b\u9646mysql")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"2022-01-01T08:26:50.458169Z 0 [System] [MY-013169] [Server] /usr/local/mysql-8.0.27-linux-glibc2.12-x86_64/bin/mysqld (mysql ver in progress as process 12616\n2022-01-01T08:26:50.473404Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.\n2022-01-01T08:26:51.700329Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.\n2022-01-01T08:26:53.536812Z 0 [Warning] [MY-013746] [Server] A deprecated TLS version TLSv1 is enabled for channel mysql_main\n2022-01-01T08:26:53.536866Z 0 [Warning] [MY-013746] [Server] A deprecated TLS version TLSv1.1 is enabled for channel mysql_main\n2022-01-01T08:26:53.651742Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: k+sETpaqg0Tz \n")),(0,n.kt)("p",null,"\u7ecf\u6d4b\u8bd5\uff0c\u968f\u673a\u751f\u6210\u7684\u5bc6\u7801\u5982\u679c\u5305\u542b\u4e86\uff1a\u201c;\u201d\u3001\u201c>\u201d\u3001\u201c_\u201d\u7b49\u7b26\u53f7\uff0c\u5728\u767b\u9646 MySQL\u65f6\u65e0\u6cd5\u8bc6\u522b\n\u9700\u8981\u5728\u7279\u6b8a\u7b26\u53f7\u524d\u9762\u52a0\u4e0a",(0,n.kt)("strong",{parentName:"p"},"\u201c\\\u201d"),"\u8f6c\u4e49\u5b57\u7b26"),(0,n.kt)("h3",{id:"\u8bbe\u7f6e-ssl"},"\u8bbe\u7f6e SSL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo bin/mysql_ssl_rsa_setup\n")),(0,n.kt)("p",null,"!> \u5982\u679c\u63d0\u793a ",(0,n.kt)("inlineCode",{parentName:"p"},"mysql_ssl_rsa_setup: [Warning] World-writable config file '/etc/my.cnf' is ignored.")," \u8bf4\u660e ",(0,n.kt)("inlineCode",{parentName:"p"},"my.cnf"),"\u8bfb\u5199\u6743\u9650\u592a\u5927\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u6743\u9650\u6765\u89e3\u51b3 ",(0,n.kt)("inlineCode",{parentName:"p"},"sudo chmod 644 /etc/my.cnf"),"\u7136\u540e\u91cd\u65b0\u6267\u884c"),(0,n.kt)("h3",{id:"\u8bbe\u7f6e\u6240\u6709\u6743"},"\u8bbe\u7f6e\u6240\u6709\u6743"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5c06\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u6240\u6709\u6743\u66f4\u6539\u4e3a root"),(0,n.kt)("li",{parentName:"ul"},"\u5c06\u6570\u636e\u6587\u4ef6\u7684\u6240\u6709\u6743\u66f4\u6539\u4e3a mysql")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo chown -R root .\nsudo chown -R mysql mysql-files\n")),(0,n.kt)("h3",{id:"\u590d\u5236\u542f\u52a8\u811a\u672c\u5230-initd"},"\u590d\u5236\u542f\u52a8\u811a\u672c\u5230 init.d"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo cp support-files/mysql.server /etc/init.d/mysql\n")),(0,n.kt)("h3",{id:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf"},"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf"),(0,n.kt)("p",null,"\u6b64\u65b9\u5f0f\u662f\u4e34\u65f6\u7684\uff0c\u5982\u679c\u5173\u95ed\u5c31\u6ca1\u4e86"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"export PATH=$PATH:/usr/local/mysql/bin\n")),(0,n.kt)("p",null,"\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6c38\u4e45\u914d\u7f6e"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo vi /etc/profile\n\n## profile \u5e95\u90e8\u6dfb\u52a0\nMYSQL_HOME=/usr/local/mysql\nPATH=$PATH:$MYSQL_HOME/bin\nexport MYSQL_HOME\n")),(0,n.kt)("h3",{id:"\u76ee\u5f55\u5c55\u793a"},"\u76ee\u5f55\u5c55\u793a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"bin")," \t\t\tmysqld \u670d\u52a1\u5668\u3001\u5ba2\u6237\u7aef\u548c\u5de5\u5177\u96c6\u7a0b\u5e8f"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"data"),"\t\t\t\u65e5\u5fd7\u6587\u4ef6\u3001\u6570\u636e\u5e93"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"docs"),"\t\t\tinfo \u683c\u5f0f\u7684 MySQL \u624b\u518c"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"include"),"\t\t\u5305\u542b\uff08header\uff09\u6587\u4ef6"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"lib"),"\t\t\t\u5e93"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"LICENSE")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"man"),"\t\t\tUNIX \u624b\u518c\u9875\u9762"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"mysql-files")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"README")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"share"),"\t\t\t\u5176\u4ed6\u652f\u6301\u6587\u4ef6\uff0c\u5305\u62ec\u9519\u8bef\u6d88\u606f\u3001\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6\u4ee5\u53ca\u7528\u4e8e\u6570\u636e\u5e93\u5b89\u88c5\u7684 SQL \u8bed\u53e5"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"support-files"))),(0,n.kt)("h2",{id:"\u542f\u52a8-mysql"},"\u542f\u52a8 MySQL"),(0,n.kt)("h3",{id:"\u4f7f\u7528\u670d\u52a1"},"\u4f7f\u7528\u670d\u52a1"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo service mysql start\n")),(0,n.kt)("h3",{id:"\u4f7f\u7528-initd"},"\u4f7f\u7528 init.d"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo /etc/init.d/mysql start\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u6ca1\u627e\u5230\u6b64\u547d\u4ee4\uff0c\u5219\u67e5\u770b\u4e0a\u9762\u6b65\u9aa4\uff1a",(0,n.kt)("a",{parentName:"p",href:"#%E5%A4%8D%E5%88%B6%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E5%88%B0-initd"},"\u590d\u5236\u542f\u52a8\u811a\u672c\u5230 init.d")),(0,n.kt)("p",{parentName:"blockquote"},"ubuntu \u4e2d\uff0c\u5982\u679c\u542f\u52a8\u5931\u8d25\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,n.kt)("inlineCode",{parentName:"p"},"sudo support-files/mysql.server start"),"\u542f\u52a8"),(0,n.kt)("p",{parentName:"blockquote"},"\u7b2c\u4e00\u6b21\u542f\u52a8\u6210\u529f\u540e\uff0c\u4f1a\u6253\u5370\u5982\u4e0b\u65e5\u5fd7\uff0c\u610f\u601d\u662f\u5c06\u542f\u52a8\u65e5\u5fd7\u653e\u5165\u4e86\u6b64\u8def\u5f84")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"Starting MySQL.Logging to '/usr/local/mysql/data/localhost.localdomain.err'.\n. SUCCESS! \n")),(0,n.kt)("p",null,"\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u5219\u8bf4\u660e\u6ca1\u6709\u6743\u9650\uff0c\u9700\u8981\u8d4b\u4e88\u76ee\u5f55\u6743\u9650"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"Starting MySQL.Logging to '/usr/local/mysql/data/VM-8-15-centos.err'.\n ERROR! The server quit without updating PID file (/usr/local/mysql/data/VM-8-15-centos.pid).\n")),(0,n.kt)("h2",{id:"\u767b\u9646-mysql"},"\u767b\u9646 MySQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mysql -u root -pk+sETpaqg0Tz\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"-p\uff1a\u540e\u9762\u62fc\u63a5\u7684\u662f\u4e0a\u9762\u65e5\u5fd7\u6253\u5370\u7684\u5bc6\u7801\uff0c \u9700\u8981\u6362\u6210\u4f60\u81ea\u5df1\u7684")),(0,n.kt)("p",null,"!> \u7ecf\u6d4b\u8bd5\uff0cUbuntu 20.x \u7248\u672c\u4e2d\u6267\u884cmysql\u547d\u4ee4\u4f1a\u51fa\u73b0\u5982\u4e0b\u95ee\u9898"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"./bin/mysql: error while loading shared libraries: libtinfo.so.5: cannot open shared object file: No such file or directory\n")),(0,n.kt)("p",null,"\u8fd9\u91cc\u5982\u679c\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"sudo apt-get install -y libtinfo.so.5"),"\u547d\u4ee4\u63d0\u793a\u627e\u4e0d\u5230\n\u53ef\u4ee5\u901a\u8fc7 ",(0,n.kt)("inlineCode",{parentName:"p"},"ls /lib/x86_64-linux-gnu/libtinfo.so*"),"\u67e5\u627e\u662f\u5426\u5b58\u5728\uff0c\u6211\u8fd9\u91cc\u627e\u5230\u4e86\u5982\u4e0b\u5185\u5bb9"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"## ls /lib/x86_64-linux-gnu/libtinfo.so*\n/lib/x86_64-linux-gnu/libtinfo.so.6  /lib/x86_64-linux-gnu/libtinfo.so.6.2\n")),(0,n.kt)("p",null,"\u7136\u540e\u901a\u8fc7\u8f6f\u8fde\u63a5\u65b9\u5f0f"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo ln -s /lib/x86_64-linux-gnu/libtinfo.so.6.2 /lib/x86_64-linux-gnu/libtinfo.so.5\n")),(0,n.kt)("h2",{id:"\u81ea\u5b9a\u4e49-root-\u7528\u6237\u5bc6\u7801"},"\u81ea\u5b9a\u4e49 root \u7528\u6237\u5bc6\u7801"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER USER 'root'@'localhost' IDENTIFIED BY 'mysql2022';\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"mysql2022\uff1a\u662f\u81ea\u5b9a\u4e49\u7684\u5bc6\u7801")),(0,n.kt)("h2",{id:"\u9000\u51fa\u767b\u9646"},"\u9000\u51fa\u767b\u9646"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"exit\n")),(0,n.kt)("h2",{id:"\u505c\u6b62-mysql"},"\u505c\u6b62 MySQL"),(0,n.kt)("h3",{id:"\u5b89\u5168\u505c\u6b62"},"\u5b89\u5168\u505c\u6b62"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mysqladmin -uroot -p shutdown\n")),(0,n.kt)("h3",{id:"\u4f7f\u7528\u670d\u52a1-1"},"\u4f7f\u7528\u670d\u52a1"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo service mysql stop\n")),(0,n.kt)("h3",{id:"\u4f7f\u7528-initd-1"},"\u4f7f\u7528 init.d"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo /etc/init.d/mysql stop\n")),(0,n.kt)("h2",{id:"\u67e5\u770b\u72b6\u6001"},"\u67e5\u770b\u72b6\u6001"),(0,n.kt)("h3",{id:"\u4f7f\u7528\u670d\u52a1-2"},"\u4f7f\u7528\u670d\u52a1"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo service mysql status\n")),(0,n.kt)("h3",{id:"\u4f7f\u7528-initd-2"},"\u4f7f\u7528 init.d"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo /etc/init.d/mysql status\n")),(0,n.kt)("h2",{id:"\u5378\u8f7d-mysql"},"\u5378\u8f7d MySQL"),(0,n.kt)("h3",{id:"\u79fb\u9664\u7b26\u53f7\u94fe\u63a5"},"\u79fb\u9664\u7b26\u53f7\u94fe\u63a5"),(0,n.kt)("h4",{id:"\u68c0\u67e5-mysql-\u6307\u5411\u4f4d\u7f6e"},"\u68c0\u67e5 mysql \u6307\u5411\u4f4d\u7f6e"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo ls -lh mysql\n")),(0,n.kt)("h4",{id:"\u5220\u9664-mysql"},"\u5220\u9664 mysql"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo rm mysql\nsudo rm -r mysql-8.0.27-linux-glibc2.12-x86_64\nsudo rm /etc/init.d/mysql\n")),(0,n.kt)("h2",{id:"\u5bc6\u7801\u5fd8\u8bb0\u600e\u4e48\u529e"},"\u5bc6\u7801\u5fd8\u8bb0\u600e\u4e48\u529e\uff1f"),(0,n.kt)("h3",{id:"\u4f7f\u7528---init-file-\u91cd\u7f6e\u5bc6\u7801"},"\u4f7f\u7528 --init-file \u91cd\u7f6e\u5bc6\u7801"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"## \u521b\u5efa\u6587\u4ef6\u5e76\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\ncd /usr/local/mysql/mysql-files/\necho 'ALTER USER 'root'@'localhost' IDENTIFIED BY 'mysql0102';' > mysql-init-password\n## \u505c\u6b62mysql\n/etc/init.d/mysql stop\n## \u542f\u52a8mysql(\u6ce8\u610f\uff1a\u52a0\u4e0a --init-file)\n/etc/init.d/mysql start --init-file=/usr/local/mysql/mysql-files/mysql-init-password\n## \u767b\u9646mysql\n## \u4f7f\u7528\u65e7\u5bc6\u7801\u3001\u65b0\u5bc6\u7801\u767b\u9646\u6d4b\u8bd5\u67e5\u770b\u662f\u5426\u4fee\u6539\u6210\u529f\n")),(0,n.kt)("h3",{id:"\u4f7f\u7528---skip-grant-tables-\u514d\u5bc6\u767b\u9646"},"\u4f7f\u7528 --skip-grant-tables \u514d\u5bc6\u767b\u9646"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"--skip-grant-tables")," \u542f\u52a8mysql\uff0c\u4e0d\u4f1a\u52a0\u8f7d\u6388\u6743\u8868\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5b9e\u73b0\u514d\u5bc6\u767b\u9646\uff0c\u7136\u540e\u901a\u8fc7 ",(0,n.kt)("inlineCode",{parentName:"p"},"flush privileges"),"\u91cd\u65b0\u52a0\u8f7d\u6388\u6743\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5bc6\u7801\u7684\u4fee\u6539\n\u5728\u4f7f\u7528\u6b64\u53c2\u6570\u4f1a\u81ea\u52a8\u542f\u7528 ",(0,n.kt)("inlineCode",{parentName:"p"},"--skip-networking"),"\u6765\u7981\u6b62\u8fdc\u7a0b\u8fde\u63a5\uff0c\u6240\u4ee5\u6211\u4eec\u4fee\u6539\u5b8c\u6bd5\u540e\u8bb0\u5f97\u6b63\u5e38\u91cd\u65b0\u542f\u52a8")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"## \u505c\u6b62mysql\n/etc/init.d/mysql stop\n## \u542f\u52a8mysql\n/etc/init.d/mysql start --skip-grant-tables\n## \u767b\u9646mysql\uff08\u5bc6\u7801\u76f4\u63a5\u56de\u8f66\u5373\u53ef\uff09\nmysql -u root -p\n## \u6267\u884csql\uff0c\u5237\u65b0\u6743\u9650\uff0c\u5982\u679c\u4e0d\u6267\u884c\u6b64\u6307\u4ee4\uff0c\u4f1a\u62a5\u9519`ERROR 1290 (HY000): The MySQL server is running with the --skip-grant-tables option so it cannot execute this statement`\nflush privileges;\n## \u4fee\u6539\u5bc6\u7801\nALTER USER 'root'@'localhost' IDENTIFIED BY '123456';\n## \u7136\u540e\u91cd\u542fmysql\n/etc/init.d/mysql restart\n## \u4f7f\u7528\u65b0\u5bc6\u7801\u767b\u9646\u6d4b\u8bd5\nmysql -u root -p123456\n")),(0,n.kt)("h3",{id:"\u91cd\u88c5"},"\u91cd\u88c5"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5907\u4efd"),(0,n.kt)("li",{parentName:"ul"},"\u5378\u8f7d"),(0,n.kt)("li",{parentName:"ul"},"\u5b89\u88c5")),(0,n.kt)("h2",{id:"\u4fee\u6539\u6570\u636e\u8def\u5f84"},"\u4fee\u6539\u6570\u636e\u8def\u5f84"),(0,n.kt)("p",null,"!> \u6ce8\u610f\uff1a\u5728\u505a\u4efb\u4f55\u5bf9\u6570\u636e\u76f8\u5173\u7684\u4e1c\u897f\u65f6\uff0c\u5efa\u8bae\u5148\u5907\u4efd\uff1b\u7531\u4e8e\u6211\u662f\u6d4b\u8bd5\u73af\u5883\uff0c\u5c31\u4e0d\u5907\u4efd\u4e86\uff1b"),(0,n.kt)("h3",{id:"\u505c\u6b62-mysql-1"},"\u505c\u6b62 MySQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-powershell"},"sudo /etc/init.d/mysql stop\n")),(0,n.kt)("h3",{id:"\u521b\u5efa\u76ee\u5f55"},"\u521b\u5efa\u76ee\u5f55"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo mkdir -pv /data\n## \u5c06\u76ee\u524d\u6743\u9650\u7ed9mysql\u7528\u6237\u7ec4\nsudo chown -R mysql:mysql /data/\n")),(0,n.kt)("h3",{id:"\u590d\u5236\u539f\u6709\u7684\u6570\u636e"},"\u590d\u5236\u539f\u6709\u7684\u6570\u636e"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo cp -r /usr/local/mysql/data/. /data/\n")),(0,n.kt)("h3",{id:"\u7f16\u8f91-mycnf"},"\u7f16\u8f91 my.cnf"),(0,n.kt)("p",null,"\u5728 ",(0,n.kt)("inlineCode",{parentName:"p"},"[mysqld]"),"\u540e\u9762\u8ffd\u52a0 ",(0,n.kt)("inlineCode",{parentName:"p"},"datadir=/data")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"[mysqld]\nlower_case_table_names=1\ndatadir=/data\n")),(0,n.kt)("h3",{id:"\u91cd\u542f\u5e76\u68c0\u67e5"},"\u91cd\u542f\u5e76\u68c0\u67e5"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"## \u67e5\u770b\u6570\u636e\u76ee\u5f55\u662f\u5426\u4fee\u6539\u4e3a /data\nshow variables like '%datadir%';\n")),(0,n.kt)("p",null,"\u5982\u679c\u4fee\u6539\u6210\u529f\uff0c\u5219\u68c0\u67e5\u6570\u636e\u5e93\u662f\u5426\u5b8c\u6574\uff0c\u5982\u679c\u68c0\u67e5\u662fok\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u5220\u9664\u65e7\u7684\u6570\u636e\u76ee\u5f55"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo rm -rf /usr/local/mysql/data\n")),(0,n.kt)("h2",{id:"mycnf-\u901a\u7528\u914d\u7f6e"},"my.cnf \u901a\u7528\u914d\u7f6e"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"[mysqld]\n## \u4f7f\u7528mysql\u8d26\u53f7\u8fd0\u884c\nuser=mysql\n## \u8bbe\u7f6e3306\u7aef\u53e3\nport=3306\n## \u8bbe\u7f6emysql\u7684\u5b89\u88c5\u76ee\u5f55\nbasedir=/usr/local/mysql\n## \u8bbe\u7f6emysql\u6570\u636e\u5e93\u7684\u6570\u636e\u7684\u5b58\u653e\u76ee\u5f55\ndatadir=/data\n## \u5141\u8bb8\u6700\u5927\u8fde\u63a5\u6570\nmax_connections=1000\n## \u5141\u8bb8\u8fde\u63a5\u5931\u8d25\u7684\u6b21\u6570\u3002\u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u6709\u4eba\u4ece\u8be5\u4e3b\u673a\u8bd5\u56fe\u653b\u51fb\u6570\u636e\u5e93\u7cfb\u7edf\nmax_connect_errors=100\n## \u670d\u52a1\u7aef\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\u9ed8\u8ba4\u4e3aUTF8\ncharacter-set-server=utf8mb4\n## \u521b\u5efa\u65b0\u8868\u65f6\u5c06\u4f7f\u7528\u7684\u9ed8\u8ba4\u5b58\u50a8\u5f15\u64ce\ndefault-storage-engine=INNODB\n## \u9ed8\u8ba4\u4f7f\u7528\u201cmysql_native_password\u201d\u63d2\u4ef6\u8ba4\u8bc1\ndefault_authentication_plugin=mysql_native_password\n#\u662f\u5426\u5bf9sql\u8bed\u53e5\u5927\u5c0f\u5199\u654f\u611f\uff0c1\u8868\u793a\u4e0d\u654f\u611f\nlower_case_table_names = 1\n#MySQL\u8fde\u63a5\u95f2\u7f6e\u8d85\u8fc7\u4e00\u5b9a\u65f6\u95f4\u540e(\u5355\u4f4d\uff1a\u79d2)\u5c06\u4f1a\u88ab\u5f3a\u884c\u5173\u95ed\n#MySQL\u9ed8\u8ba4\u7684wait_timeout  \u503c\u4e3a8\u4e2a\u5c0f\u65f6, interactive_timeout\u53c2\u6570\u9700\u8981\u540c\u65f6\u914d\u7f6e\u624d\u80fd\u751f\u6548\ninteractive_timeout = 1800\nwait_timeout = 1800\n#Metadata Lock\u6700\u5927\u65f6\u957f\uff08\u79d2\uff09\uff0c \u4e00\u822c\u7528\u4e8e\u63a7\u5236 alter\u64cd\u4f5c\u7684\u6700\u5927\u65f6\u957fsine mysql5.6\n#\u6267\u884c DML\u64cd\u4f5c\u65f6\u9664\u4e86\u589e\u52a0innodb\u4e8b\u52a1\u9501\u5916\u8fd8\u589e\u52a0Metadata Lock\uff0c\u5176\u4ed6alter\uff08DDL\uff09session\u5c06\u963b\u585e\nlock_wait_timeout = 3600\n#\u5185\u90e8\u5185\u5b58\u4e34\u65f6\u8868\u7684\u6700\u5927\u503c\u3002\n#\u6bd4\u5982\u5927\u6570\u636e\u91cf\u7684group by ,order by\u65f6\u53ef\u80fd\u7528\u5230\u4e34\u65f6\u8868\uff0c\n#\u8d85\u8fc7\u4e86\u8fd9\u4e2a\u503c\u5c06\u5199\u5165\u78c1\u76d8\uff0c\u7cfb\u7edfIO\u538b\u529b\u589e\u5927\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n[mysql]\n## \u8bbe\u7f6emysql\u5ba2\u6237\u7aef\u9ed8\u8ba4\u5b57\u7b26\u96c6\ndefault-character-set=utf8mb4\n## \u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\nlog-error=/data/logs/mysqld.log\n## ssl(x509)\u76f8\u5173\n## ca\u8bc1\u4e66\u8def\u5f84\nssl-ca=/data/ca.pem\n## \u5ba2\u6237\u7aef\u8bc1\u4e66\nssl-cert=/data/server-cert.pem\n## \u5ba2\u6237\u7aef\u5bc6\u94a5\nssl-key=/data/server-key.pem\n## \u5f3a\u5236\u4f7f\u7528 ssl\nrequire_secure_transport=ON\n[client]\n## \u8bbe\u7f6emysql\u5ba2\u6237\u7aef\u8fde\u63a5\u670d\u52a1\u7aef\u65f6\u9ed8\u8ba4\u4f7f\u7528\u7684\u7aef\u53e3\nport=3306\ndefault-character-set=utf8mb4\n")),(0,n.kt)("h2",{id:"\u4f7f\u7528x509\u8bbe\u7f6e\u52a0\u5bc6\u8fde\u63a5"},"\u4f7f\u7528X509\u8bbe\u7f6e\u52a0\u5bc6\u8fde\u63a5"),(0,n.kt)("h3",{id:"\u67e5\u770bssl\u72b6\u6001"},"\u67e5\u770bSSL\u72b6\u6001"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"show status like 'Ssl_cipher';\n\n+---------------+-------+\n| Variable_name | Value |\n+---------------+-------+\n| Ssl_cipher    |       |\n+---------------+-------+\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u672a\u8bbe\u7f6essl\uff0c\u5219Ssl_cipher\u662f\u7a7a\u767d\u7684")),(0,n.kt)("p",null,"\u6240\u6709\u4e0eSSL\uff08X590\uff09\u76f8\u5173\u7684\u6587\u4ef6",(0,n.kt)("inlineCode",{parentName:"p"},"ca.pem\u3001server-cert.pem\u3001server-key.pem\u3001client-cert.pem\u3001client-key.pem"),"\u90fd\u7531mysql\u5728\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u521b\u5efa\u5e76\u4fdd\u5b58\u5728\u6570\u636e\u76ee\u5f55\u4e0b"),(0,n.kt)("p",null,"\u670d\u52a1\u7aef\u9700\u8981\u7528\u5230 ",(0,n.kt)("inlineCode",{parentName:"p"},"ca.pem\u3001server-cert.pem\u3001server-key.pem")),(0,n.kt)("p",null,"\u5ba2\u6237\u7aef\u9700\u8981\u7528\u5230 ",(0,n.kt)("inlineCode",{parentName:"p"},"client-cert.pem\u3001client-key.pem"),"\u624d\u80fd\u8fde\u63a5\u5230 mysql\u670d\u52a1\u7aef"),(0,n.kt)("h3",{id:"\u670d\u52a1\u7aef\u914d\u7f6e"},"\u670d\u52a1\u7aef\u914d\u7f6e"),(0,n.kt)("h4",{id:"\u914d\u7f6emycnf"},"\u914d\u7f6emy.cnf"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u4ece\u7b2c7\u884c\u5f00\u59cb\uff0c\u4ee5 ",(0,n.kt)("inlineCode",{parentName:"p"},"ssl-"),"\u5f00\u5934\u7684\u914d\u7f6e")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"[mysqld]\nlower_case_table_names=1\ndatadir=/data\nlog_bin=/data/binlogs/server1\nserver_id=100\n\nssl-ca=/data/ca.pem\nssl-cert=/data/server-cert.pem\nssl-key=/data/server-key.pem\n")),(0,n.kt)("h4",{id:"\u91cd\u542f"},"\u91cd\u542f"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"/etc/init.d/mysql restart\n")),(0,n.kt)("h3",{id:"\u5ba2\u6237\u7aef\u914d\u7f6e"},"\u5ba2\u6237\u7aef\u914d\u7f6e"),(0,n.kt)("p",null,"\u5ba2\u6237\u7aef\u9700\u8981\u7528\u5230 ",(0,n.kt)("inlineCode",{parentName:"p"},"client-cert.pem\u3001client-key.pem"),"\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5148\u4e0b\u8f7d\u51fa\u6765"),(0,n.kt)("p",null,"\u7136\u540e\u4f7f\u7528ssl\u8fde\u63a5mysql"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mysql --ssl-cert=client-cert.pem --ssl-key=client-key.pem -h ip\u5730\u5740 -P 3306 -u admin -p123456\n")),(0,n.kt)("p",null,"\u6267\u884c\u547d\u4ee4\uff0c\u67e5\u770b\u662f\u5426\u6210\u529f\u4f7f\u7528 SSL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> show status like 'ssl_cipher';\n+---------------+-----------------------------+\n| Variable_name | Value                       |\n+---------------+-----------------------------+\n| Ssl_cipher    | ECDHE-RSA-AES128-GCM-SHA256 |\n+---------------+-----------------------------+\n")),(0,n.kt)("h3",{id:"\u8bbe\u7f6e\u5f3a\u5236\u4f7f\u7528-x509-\u8fde\u63a5"},"\u8bbe\u7f6e\u5f3a\u5236\u4f7f\u7528 x509 \u8fde\u63a5"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"alter user `admin`@'%' require x509;\n")),(0,n.kt)("p",null,"\u6b64\u65b9\u5f0f\u8bbe\u7f6eadmin\u7528\u6237\u5f3a\u5236\u4f7f\u7528ssl\u8fde\u63a5"),(0,n.kt)("p",null,"\u8fd8\u53ef\u4ee5\u5728my.cnf\u4e2d\u914d\u7f6e\n",(0,n.kt)("inlineCode",{parentName:"p"},"require_secure_transport=ON"),"\u6765\u8bbe\u7f6e\u5f3a\u5236\u4f7f\u7528ssl"),(0,n.kt)("p",null,"\u6216\u8005\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u914d\u7f6e\n",(0,n.kt)("inlineCode",{parentName:"p"},"SETPERSIST require_secure_transport=ON;")),(0,n.kt)("h4",{id:"\u6d4b\u8bd5\u975essl\u8fde\u63a5"},"\u6d4b\u8bd5\u975essl\u8fde\u63a5"),(0,n.kt)("p",null,"\u8bf4\u660e\u914d\u7f6e\u751f\u6548\u4e86"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mysql -h ip\u5730\u5740 -P 3306 -u admin -p123456\n\nmysql: [Warning] Using a password on the command line interface can be insecure.\nERROR 1045 (28000): Access denied for user 'admin'@'ip\u5730\u5740' (using password: YES)\n")),(0,n.kt)("h5",{id:"\u5de5\u5177\u8fde\u63a5\u6d4b\u8bd5"},"\u5de5\u5177\u8fde\u63a5\u6d4b\u8bd5"),(0,n.kt)("p",null,"\u4ee5\u4e0b\u662f\u4ee5 ",(0,n.kt)("inlineCode",{parentName:"p"},"navicat"),"\u5de5\u5177\u6d4b\u8bd5\n\u5728ssl\u9009\u9879\u4e2d\u5206\u522b\u914d\u7f6e\u8fdb\u5165\u5bc6\u94a5\u548c\u8bc1\u4e66\u5373\u53ef"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/2478181/1641133745691-381d4259-caf7-4034-93dc-a265255beef4.png#clientId=ua0138f1d-3fa7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=153&id=ueb919fae&margin=%5Bobject%20Object%5D&name=image.png&originHeight=306&originWidth=585&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14282&status=done&style=none&taskId=u44fbc00b-3aaa-400e-ae7e-96fa08b62e5&title=&width=292.5",alt:"image.png"})))}k.isMDXComponent=!0}}]);