"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[2200],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=a.createContext({}),u=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=u(e.components);return a.createElement(c.Provider,{value:n},e.children)},d="mdxType",s={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},k=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=u(t),k=r,m=d["".concat(c,".").concat(k)]||d[k]||s[k]||l;return t?a.createElement(m,i(i({ref:n},p),{},{components:t})):a.createElement(m,i({ref:n},p))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=k;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o[d]="string"==typeof e?e:r,i[1]=o;for(var u=2;u<l;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}k.displayName="MDXCreateElement"},2313:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>s,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var a=t(7462),r=(t(7294),t(3905));const l={},i="MacOS \u73af\u5883\u914d\u7f6e",o={unversionedId:"\u540e\u7aef/MacOsM1",id:"\u540e\u7aef/MacOsM1",title:"MacOS \u73af\u5883\u914d\u7f6e",description:"Docker \u6784\u5efa Arm \u955c\u50cf",source:"@site/docs/\u540e\u7aef/MacOsM1.md",sourceDirName:"\u540e\u7aef",slug:"/\u540e\u7aef/MacOsM1",permalink:"/docs/\u540e\u7aef/MacOsM1",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Linux",permalink:"/docs/\u540e\u7aef/Linux"},next:{title:"Netty",permalink:"/docs/\u540e\u7aef/Netty"}},c={},u=[{value:"Docker \u6784\u5efa Arm \u955c\u50cf",id:"docker-\u6784\u5efa-arm-\u955c\u50cf",level:2},{value:"arm JDK",id:"arm-jdk",level:2},{value:"arm Dockerfile",id:"arm-dockerfile",level:2},{value:"Macos \u52a8\u6001\u5207\u6362JDK\u7248\u672c",id:"macos-\u52a8\u6001\u5207\u6362jdk\u7248\u672c",level:2},{value:"1\u3001\u914d\u7f6e\u73af\u5883\u53d8\u91cf",id:"1\u914d\u7f6e\u73af\u5883\u53d8\u91cf",level:2},{value:"2\u3001\u5b58\u653e\u811a\u672c<code>useJdk.sh</code>",id:"2\u5b58\u653e\u811a\u672cusejdksh",level:2},{value:"3\u3001\u8d4b\u4e88\u811a\u672c\u6267\u884c\u6743\u9650",id:"3\u8d4b\u4e88\u811a\u672c\u6267\u884c\u6743\u9650",level:2},{value:"4\u3001\u5207\u6362jdk",id:"4\u5207\u6362jdk",level:2}],p={toc:u},d="wrapper";function s(e){let{components:n,...t}=e;return(0,r.kt)(d,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"macos-\u73af\u5883\u914d\u7f6e"},"MacOS \u73af\u5883\u914d\u7f6e"),(0,r.kt)("h2",{id:"docker-\u6784\u5efa-arm-\u955c\u50cf"},"Docker \u6784\u5efa Arm \u955c\u50cf"),(0,r.kt)("p",null,"\u65b0\u5efa\u5e76\u542f\u52a8builder\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"docker buildx create --use --name m1_builder\ndocker buildx inspect --bootstrap\n")),(0,r.kt)("p",null,"\u6784\u5efa"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"docker buildx build --platform linux/arm64 --load -t tfl-back:v1 .\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--platform")," \u6307\u5b9a arm64 \u4f4d\u67b6\u6784"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--load")," \u5728\u672c\u5730\u4f7f\u7528 \u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"--push")," \u63a8\u9001\u5230\u955c\u50cf\u4ed3\u5e93"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-t")," \u6307\u5b9a name:tag")),(0,r.kt)("p",null,"\u8fd0\u884c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," docker run -d --name tfl-back -p 18081:8081 tfl-back:v1\n")),(0,r.kt)("h2",{id:"arm-jdk"},"arm JDK"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"azul/zulu-openjdk-alpine:17.0.4-17.36.15-arm64\n")),(0,r.kt)("h2",{id:"arm-dockerfile"},"arm Dockerfile"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dockerfile"},'FROM azul/zulu-openjdk-alpine:17.0.4-17.36.15-arm64\n\nWORKDIR application\n\nEXPOSE 8081\n\nARG JAR_FILE=application.jar\nCOPY ${JAR_FILE} application.jar\n\nENV JVM_OPTS="" \\\n    TZ=Asia/Shanghai\n\nRUN ln -sf /usr/share/zoneinfo/$TZ /etc/localtime \\\n    && echo $TZ > /etc/timezone\n\nENTRYPOINT java ${JVM_OPTS} -jar application.jar -Djava.security.egd=file:/dev/./urandom\n')),(0,r.kt)("h2",{id:"macos-\u52a8\u6001\u5207\u6362jdk\u7248\u672c"},"Macos \u52a8\u6001\u5207\u6362JDK\u7248\u672c"),(0,r.kt)("h2",{id:"1\u914d\u7f6e\u73af\u5883\u53d8\u91cf"},"1\u3001\u914d\u7f6e\u73af\u5883\u53d8\u91cf"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'# \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\n> vim ~/.zshrc\n\n# \u7f16\u8f91\u5185\u5bb9\nexport JAVA_USE_HOME="~/usejdk/Contents/Home"\nexport JAVA_HOME=$JAVA_USE_HOME\nexport PATH=$JAVA_HOME/bin:$PATH\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nalias jdk="~/useJdk.sh"\n# \u7f16\u8f91\u5185\u5bb9 end\n\n# \u5237\u65b0\u914d\u7f6e\n> source ~/.zshrc\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"JAVA_USE_HOME")," \u6b64\u8def\u5f84\u662f\u5b58\u653e\u8f6f\u94fe\u63a5\u7684\u8def\u5f84\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"usejdk")," \u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u540e\u7eed\u4f7f\u7528\u65f6\u4fdd\u6301\u4e00\u81f4\u5373\u53ef"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"alias jdk")," \u7684\u503c\u662f\u540e\u7eed\u5b58\u50a8\u7684\u811a\u672c\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4f4d\u7f6e\u548c\u540d\u79f0")),(0,r.kt)("h2",{id:"2\u5b58\u653e\u811a\u672cusejdksh"},"2\u3001\u5b58\u653e\u811a\u672c",(0,r.kt)("inlineCode",{parentName:"h2"},"useJdk.sh")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'#!/bin/bash\n\n# JDK \u7248\u672c, \u5982\u679c\u6ca1\u6709\u6b64\u53c2\u6570\u5219\u6253\u5370\u51fa\u6240\u6709\u7684jdk\u7248\u672c\u5217\u8868\njdkVersion=$1\n\nif [ -n "$jdkVersion" ]\nthen\n    ln -snf "/Library/Java/JavaVirtualMachines/zulu-$jdkVersion.jdk/" ~/usejdk\n    java -version\nelse\n    ls /Library/Java/JavaVirtualMachines\nfi\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"/Library/Java/JavaVirtualMachines/zulu-$1.jdk/")," \u662f\u6211jdk\u5b89\u88c5\u8def\u5f84"),(0,r.kt)("p",{parentName:"blockquote"},"\u8def\u5f84\u4e0b\u5305\u542b\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"zulu-8.jdk"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"zulu-11.jdk"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"zulu-17.jdk")," \u4e09\u4e2a\u7248\u672c"),(0,r.kt)("p",{parentName:"blockquote"},"\u6240\u4ee5\u6211\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u4e00\u4e2a\u53c2\u6570\u4f20\u8fdb\u6765\u7248\u672c")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ln -snf")," \u662f\u5c06jdk\u8f6f\u94fe\u63a5\u5230 ",(0,r.kt)("inlineCode",{parentName:"li"},"~/usejdk")," \u8def\u5f84")),(0,r.kt)("h2",{id:"3\u8d4b\u4e88\u811a\u672c\u6267\u884c\u6743\u9650"},"3\u3001\u8d4b\u4e88\u811a\u672c\u6267\u884c\u6743\u9650"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"chmod +x ./useJdk.sh\n")),(0,r.kt)("h2",{id:"4\u5207\u6362jdk"},"4\u3001\u5207\u6362jdk"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# \u67e5\u770bjdk\u5217\u8868\njdk\n# \u5207\u6362jdk\njdk 8\njdk 11\njdk 17\n")))}s.isMDXComponent=!0}}]);